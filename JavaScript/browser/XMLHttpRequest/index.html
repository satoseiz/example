<!DOCTYPE html>
<html lang="ja" xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>XMLHttpRequest</title>
  </head>
  <body>
    <main>
      <section>
        <h1>Example</h1>
          <p><button id="xhr-button">XMLHttpRequest</button></p>
          <textarea id='xhr-result' style="width: 50%; height: 10em;"></textarea>
<script>
// <![CDATA[
let button = document.getElementById("xhr-button");
button.onclick = function() {
  // 1. Create XMLHtpRequest instance.
  let xhr = new XMLHttpRequest();
  // 2. Set HTTP requet property.
  xhr.open('GET', location.href);
  // 3. Send HTTP request.
  xhr.send();
  // 4. Handle HTTP response.
  xhr.onload = function() {
    let result = document.getElementById('xhr-result');
    if ((xhr.status < 200) || (400 <= xhr.status)) {
      result.value = `Error ${xhr.status}: ${xhr.statusText}`;
      return;
    }
    result.value = xhr.response;
  };
};
// ]]>
</script>
      </section>
      <section>
        <h1>Description</h1>
        <p>クライアントスクリプトからのHTTP通信を実現するXMLHttpRequestのJavaScriptでの使用例を作成した。</p>
          <p>ソースコードと動作ページはそれぞれ以下のURLから閲覧可能だ。<p/>
          <ul>
            <li>ソースコード: <a href="https://github.com/senooken/example/blob/master/JavaScript/browser/XMLHttpRequest/index.html">https://github.com/senooken/example/blob/master/JavaScript/browser/XMLHttpRequest/index.html</a></li>
            <li>動作ページ1: <a href="https://example.senooken.jp/JavaScript/browser/index.html">https://example.senooken.jp/JavaScript/browser/index.html</a</li>
            <li>動作ページ2: <a href="https://senooken.github.io/example/JavaScript/browser/index.html">https://senooken.github.io/example/JavaScript/browser/index.html</a</li>
          </ul>
          <p>この例では [XMLHttpRequest] ボタンを選択すると，自分自身にGETメソッドを送信し，応答本体をボタンの下のtextarea要素に表示する。</p>
          <p>XMLHttpRequestの使用手順は「<a href="https://senooken.jp/post/2020/01/22/"></a>」で解説している。</p>
      </section>
    </main>
  </body>
</html>
